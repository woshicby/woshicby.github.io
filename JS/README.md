# JS 目录说明文档

本目录包含网站的JavaScript文件，实现各种交互功能和页面逻辑。

## 文件结构

```
JS/
├── navigation.js      # 响应式导航栏交互逻辑
├── pace-calculator.js # 配速计算器核心功能
└── touken-forge.js    # 刀剑乱舞锻刀模拟器游戏逻辑
```

## 文件说明

### navigation.js

**响应式导航栏交互逻辑**，提供以下功能：
- 移动端汉堡菜单切换效果
- 导航菜单展开/收起动画
- 点击导航链接后自动收起菜单
- 窗口大小变化时的响应式调整

主要实现原理：
- 监听汉堡菜单按钮的点击事件
- 通过添加/移除CSS类来控制菜单显示状态
- 实现汉堡菜单按钮到X形状的动画转换
- 监听窗口大小变化，在大屏幕时自动展开导航菜单

### pace-calculator.js

**配速计算器核心功能**，提供以下功能：
- 距离和时间输入验证
- 自动计算配速结果（分钟/公里）
- 实时结果更新
- 格式化时间显示

主要实现原理：
- 监听表单输入事件
- 进行数据验证和单位转换
- 执行配速计算逻辑
- 更新页面上的计算结果显示

### touken-forge.js

**刀剑乱舞锻刀模拟器游戏逻辑**，提供以下功能：
- 材料选择和数量设置
- 锻刀动画和效果
- 结果随机生成和展示
- 历史记录管理

主要实现原理：
- 材料投入逻辑和验证
- 基于投入材料的概率计算
- 结果展示和UI交互
- 本地存储历史记录

## 开发规范

### 代码风格

- 采用函数式编程风格
- 使用ES6+语法特性
- 变量和函数命名遵循驼峰命名法（camelCase）
- 常量使用全大写和下划线（UPPER_SNAKE_CASE）

### 文件组织

- 每个JS文件对应一个主要功能模块
- 相关功能封装在独立函数中
- 使用文档注释说明函数用途和参数

### 最佳实践

- 使用事件委托处理动态生成的元素
- 避免全局变量污染，使用IIFE或模块模式
- 适当使用本地存储保存用户数据
- 确保错误处理和异常捕获
- 优化性能，避免不必要的DOM操作

## 开发指南

1. **添加新功能**：
   - 分析功能需求并设计实现方案
   - 创建新的JS文件或在现有文件中添加功能
   - 编写测试确保功能正常工作
   - 在HTML文件中引入新的JS文件

2. **修改现有功能**：
   - 理解现有代码的结构和逻辑
   - 遵循现有的代码风格和命名规范
   - 进行适当的代码重构以提高可维护性
   - 测试确保修改不会影响现有功能

3. **性能优化**：
   - 减少DOM操作次数
   - 使用事件委托处理列表元素
   - 避免在循环中进行DOM操作
   - 合理使用缓存减少计算量

## 注意事项

- 所有JS文件应该在HTML文件末尾引入，或使用`defer`属性
- 确保JS代码兼容现代浏览器
- 避免使用已经废弃的API
- 定期检查和更新第三方库（如有）